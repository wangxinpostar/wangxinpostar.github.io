/*!
 * Flickr's Justified Gallery [fjGallery] v2.1.2 (https://flickr-justified-gallery.nkdev.info)
 * Copyright 2022 nK <https://nkdev.info>
 * Licensed under MIT (https://github.com/nk-o/flickr-justified-gallery/blob/master/LICENSE)
 */
!function (t, e) { "object" == typeof exports && "undefined" != typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define(e) : (t = "undefined" != typeof globalThis ? globalThis : t || self).fjGallery = e() }(this, (function () { "use strict"; let t; t = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {}; var e = t; function i(t, e, i) { var o = (i || {}).atBegin; return function (t, e, i) { var o, n = i || {}, s = n.noTrailing, a = void 0 !== s && s, r = n.noLeading, h = void 0 !== r && r, c = n.debounceMode, l = void 0 === c ? void 0 : c, g = !1, d = 0; function u() { o && clearTimeout(o) } function p() { for (var i = arguments.length, n = new Array(i), s = 0; s < i; s++)n[s] = arguments[s]; var r = this, c = Date.now() - d; function p() { d = Date.now(), e.apply(r, n) } function f() { o = void 0 } g || (h || !l || o || p(), u(), void 0 === l && c > t ? h ? (d = Date.now(), a || (o = setTimeout(l ? f : p, t))) : p() : !0 !== a && (o = setTimeout(l ? f : p, void 0 === l ? t - c : t))) } return p.cancel = function (t) { var e = (t || {}).upcomingOnly, i = void 0 !== e && e; u(), g = !i }, p }(t, e, { debounceMode: !1 !== (void 0 !== o && o) }) } var o = function (t) { var e = [], i = null, o = function () { for (var o = arguments.length, n = new Array(o), s = 0; s < o; s++)n[s] = arguments[s]; e = n, i || (i = requestAnimationFrame((function () { i = null, t.apply(void 0, e) }))) }; return o.cancel = function () { i && (cancelAnimationFrame(i), i = null) }, o }, n = { exports: {} }; (n.exports = function (t) { this.top = t.top, this.left = t.left, this.width = t.width, this.spacing = t.spacing, this.targetRowHeight = t.targetRowHeight, this.targetRowHeightTolerance = t.targetRowHeightTolerance, this.minAspectRatio = this.width / t.targetRowHeight * (1 - t.targetRowHeightTolerance), this.maxAspectRatio = this.width / t.targetRowHeight * (1 + t.targetRowHeightTolerance), this.edgeCaseMinRowHeight = t.edgeCaseMinRowHeight, this.edgeCaseMaxRowHeight = t.edgeCaseMaxRowHeight, this.widowLayoutStyle = t.widowLayoutStyle, this.isBreakoutRow = t.isBreakoutRow, this.items = [], this.height = 0 }).prototype = { addItem: function (t) { var e, i, o, n = this.items.concat(t), s = this.width - (n.length - 1) * this.spacing, a = n.reduce((function (t, e) { return t + e.aspectRatio }), 0), r = s / this.targetRowHeight; return this.isBreakoutRow && 0 === this.items.length && t.aspectRatio >= 1 ? (this.items.push(t), this.completeLayout(s / t.aspectRatio, "justify"), !0) : a < this.minAspectRatio ? (this.items.push(Object.assign({}, t)), !0) : a > this.maxAspectRatio ? 0 === this.items.length ? (this.items.push(Object.assign({}, t)), this.completeLayout(s / a, "justify"), !0) : (e = this.width - (this.items.length - 1) * this.spacing, i = this.items.reduce((function (t, e) { return t + e.aspectRatio }), 0), o = e / this.targetRowHeight, Math.abs(a - r) > Math.abs(i - o) ? (this.completeLayout(e / i, "justify"), !1) : (this.items.push(Object.assign({}, t)), this.completeLayout(s / a, "justify"), !0)) : (this.items.push(Object.assign({}, t)), this.completeLayout(s / a, "justify"), !0) }, isLayoutComplete: function () { return this.height > 0 }, completeLayout: function (t, e) { var i, o, n, s, a, r = this.left, h = this.width - (this.items.length - 1) * this.spacing; (void 0 === e || ["justify", "center", "left"].indexOf(e) < 0) && (e = "left"), t !== (o = Math.max(this.edgeCaseMinRowHeight, Math.min(t, this.edgeCaseMaxRowHeight))) ? (this.height = o, i = h / o / (h / t)) : (this.height = t, i = 1), this.items.forEach((function (t) { t.top = this.top, t.width = t.aspectRatio * this.height * i, t.height = this.height, t.left = r, r += t.width + this.spacing }), this), "justify" === e ? (r -= this.spacing + this.